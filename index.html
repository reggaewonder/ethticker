<!DOCTYPE html>
<html>
<head>
    <title>ETH TICKER DEBUG</title>
    <style>
        body { background: #000; color: #fff; font-family: monospace; padding: 20px; text-align: center; }
        #price { font-size: 80px; margin: 50px 0; color: #00ff00; }
        #log { background: #222; padding: 10px; text-align: left; font-size: 12px; color: #aaa; height: 150px; overflow-y: scroll; border: 1px solid #444; }
        .error { color: #ff4444; }
    </style>
</head>
<body>
    <h1>ETH/USDT LIVE</h1>
    <div id="price">CONNECTING...</div>
    
    <div id="log">--- SYSTEM LOG ---<br></div>

    <script>
        const priceDiv = document.getElementById('price');
        const logDiv = document.getElementById('log');

        function writeLog(msg, isError = false) {
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div class="${isError ? 'error' : ''}">[${time}] ${msg}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function start() {
            writeLog("Attempting connection to Binance...");
            
            // Using the global stream which is generally more stable
            const socket = new WebSocket('wss://stream.binance.com:9443/ws/ethusdt@trade');

            socket.onopen = () => {
                writeLog("CONNECTED SUCCESS");
                priceDiv.style.color = "#00ff00";
            };

            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                const price = parseFloat(data.p).toFixed(2);
                priceDiv.innerText = "$" + price;
            };

            socket.onerror = (err) => {
                writeLog("WEBSOCKET ERROR - Check browser console", true);
                priceDiv.innerText = "ERROR";
            };

            socket.onclose = () => {
                writeLog("CONNECTION CLOSED - Retrying in 5s...", true);
                setTimeout(start, 5000);
            };
        }

        start();
    </script>
</body>
</html>
